import{r as d,j as r,B as o,T as n,ab as m,Z as w}from"./TextField-DZyt019d.js";import{o as h,T as u,d as p,e as b,f as c,g as e,h as f,H as D}from"./admin-Bp2qA-3f.js";function S({orderId:a}){const[x,T]=d.useState(null),[l,y]=d.useState(null);if(d.useEffect(()=>{(async()=>{try{const t=localStorage.getItem("jwt");if(!t){console.error("JWT token is missing");return}const j=await fetch(`/api/admin/orders/detail/${a}`,{method:"GET",headers:{Authorization:"Bearer "+t}});if(!j.ok)throw new Error("Failed to fetch order details");const g=await j.json();console.log(g),T(g)}catch(t){y(t.message)}})()},[a]),!x&&!l)return r.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:r.jsx(n,{variant:"h6",children:"Đang tải dữ liệu..."})});if(l)return r.jsx(o,{sx:{p:4},children:r.jsxs(n,{variant:"h6",color:"error",children:["Lỗi: ",l]})});const{Ticket_Seat_Room:v,popcorn:_,order:i}=x;return r.jsxs(o,{sx:{p:4},children:[r.jsx(n,{variant:"h3",gutterBottom:!0,children:"Chi tiết đơn hàng"}),r.jsxs(o,{sx:{mb:3},children:[r.jsxs(n,{variant:"body1",children:[r.jsx("strong",{children:"Mã đơn hàng:"})," ",i[0].order_id]}),r.jsxs(n,{variant:"body1",children:[r.jsx("strong",{children:"Người đặt:"})," ",i[0].username]}),r.jsxs(n,{variant:"body1",children:[r.jsx("strong",{children:"Phim:"})," ",i[0].film_name]}),r.jsxs(n,{variant:"body1",children:[r.jsx("strong",{children:"Ngày chiếu:"})," ",new Date(i[0].show_date).toLocaleDateString()]}),r.jsxs(n,{variant:"body1",children:[r.jsx("strong",{children:"Tổng giá:"})," ",h(i[0].total_price)]}),r.jsxs(n,{variant:"body1",children:[r.jsx("strong",{children:"Ngày đặt:"})," ",new Date(i[0].order_date).toLocaleDateString()]})]}),r.jsx(n,{variant:"h3",gutterBottom:!0,children:"Thông tin vé"}),r.jsx(u,{component:m,sx:{mb:3},children:r.jsxs(p,{children:[r.jsx(b,{children:r.jsxs(c,{children:[r.jsx(e,{children:r.jsx("strong",{children:"Rạp"})}),r.jsx(e,{children:r.jsx("strong",{children:"Phòng"})}),r.jsx(e,{children:r.jsx("strong",{children:"Hàng ghế"})}),r.jsx(e,{children:r.jsx("strong",{children:"Số ghế"})}),r.jsx(e,{children:r.jsx("strong",{children:"Giá vé"})})]})}),r.jsx(f,{children:v.map((s,t)=>r.jsxs(c,{children:[r.jsx(e,{children:s.cinema_name}),r.jsx(e,{children:s.room_name}),r.jsx(e,{children:s.seat_row}),r.jsx(e,{children:s.seat_number}),r.jsx(e,{children:h(s.ticket_price)})]},t))})]})}),r.jsx(n,{variant:"h3",gutterBottom:!0,children:"Thông tin bắp nước"}),r.jsx(u,{component:m,children:r.jsxs(p,{children:[r.jsx(b,{children:r.jsxs(c,{children:[r.jsx(e,{children:r.jsx("strong",{children:"Combo"})}),r.jsx(e,{children:r.jsx("strong",{children:"Giá"})}),r.jsx(e,{children:r.jsx("strong",{children:"Số lượng"})})]})}),r.jsx(f,{children:_.map((s,t)=>r.jsxs(c,{children:[r.jsx(e,{children:s.combo_name}),r.jsx(e,{children:h(s.combo_price)}),r.jsx(e,{children:s.combo_quantity})]},t))})]})})]})}function E(){const{id:a}=w();return r.jsxs(r.Fragment,{children:[r.jsx(D,{children:r.jsxs("title",{children:[" ","Thông tin chi tiết đơn hàng | Trang quản trị website bán vé xem phim NHTT"]})}),r.jsx(S,{orderId:a})]})}export{E as default};
