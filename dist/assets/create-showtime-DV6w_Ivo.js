import{r as c,q as x,j as e,T as f,K as r,B as j,z as g,A as w}from"./TextField-DZyt019d.js";import{D as _,C as y,a as C,b,S as v,H as S}from"./admin-Bp2qA-3f.js";import{S as T}from"./Stack-CFKMML1m.js";function k(){const[t,l]=c.useState({film_name:"",room_name:"",cinema_name:"",show_date:"",show_time:""}),[o,i]=c.useState({open:!1,message:"",severity:"success"}),d=x(),h=()=>i(s=>({...s,open:!1})),a=s=>{const{name:m,value:n}=s.target;l(u=>({...u,[m]:n}))},p=async s=>{s.preventDefault();const m={...t,show_date:t.show_date,show_time:t.show_time};try{const n=localStorage.getItem("jwt");if(!n){console.error("JWT token is missing");return}if(!(await fetch("/api/admin/showtimes/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(m)})).ok)throw new Error("Failed to create showtime");i({open:!0,message:"Suất chiếu phim đã được tạo thành công!",severity:"success"}),setTimeout(()=>d("/admin/showtime"),1e3)}catch{i({open:!0,message:"Có lỗi xảy ra khi tạo suất chiếu!",severity:"error"}),l({film_name:"",room_name:"",cinema_name:"",show_date:"",show_time:""})}};return e.jsxs(_,{children:[e.jsxs(y,{children:[e.jsx(C,{title:e.jsx(f,{variant:"h2",children:"Mẫu tạo suất chiếu phim mới"})}),e.jsx(b,{children:e.jsxs("form",{onSubmit:p,children:[e.jsxs(T,{spacing:3,children:[e.jsx(r,{name:"film_name",label:"Tên phim",value:t.film_name,onChange:a,required:!0,fullWidth:!0}),e.jsx(r,{name:"room_name",label:"Tên phòng",value:t.room_name,onChange:a,required:!0,fullWidth:!0}),e.jsx(r,{name:"cinema_name",label:"Tên rạp",value:t.cinema_name,onChange:a,required:!0,fullWidth:!0}),e.jsx(r,{name:"show_date",label:"Ngày chiếu",type:"date",InputLabelProps:{shrink:!0},value:t.show_date,onChange:a,required:!0,fullWidth:!0}),e.jsx(r,{name:"show_time",label:"Giờ chiếu",type:"time",InputLabelProps:{shrink:!0},value:t.show_time,onChange:a,required:!0,fullWidth:!0})]}),e.jsx(j,{mt:3,display:"flex",justifyContent:"flex-end",children:e.jsx(g,{type:"submit",variant:"contained",color:"primary",children:"Tạo suất chiếu"})})]})})]}),e.jsx(v,{open:o.open,autoHideDuration:4e3,onClose:h,children:e.jsx(w,{onClose:h,severity:o.severity,children:o.message})})]})}function H(){return e.jsxs(e.Fragment,{children:[e.jsx(S,{children:e.jsxs("title",{children:[" ","Tạo suất chiếu | Trang quản trị website bán vé xem phim NHTT"]})}),e.jsx(k,{})]})}export{H as default};
